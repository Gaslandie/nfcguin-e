<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Super Admin Dashboard - BANKAÏ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- DataTables -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <link rel="stylesheet" href="dashboard-admin.css">
</head>

<body>
    <!-- Menu toggle mobile -->
    <button class="menu-toggle" id="menuToggle">
        <i class="bi bi-list"></i> Menu Admin
    </button>

    <!-- Overlay mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="logo">
            <a href="#">
                <span class="logo-b">B</span>
                <span>BANKAÏ Admin</span>
            </a>
        </div>
        <a href="#" class="nav-link" data-section="overview">
            <i class="bi bi-speedometer2"></i> Vue d'ensemble
        </a>
        <a href="#" class="nav-link" data-section="users">
            <i class="bi bi-people"></i> Utilisateurs
        </a>
        <a href="#" class="nav-link" data-section="enterprises">
            <i class="bi bi-building"></i> Entreprises
        </a>
        <a href="#" class="nav-link" data-section="cards">
            <i class="bi bi-credit-card"></i> Cartes
        </a>
        <a href="#" class="nav-link" data-section="orders">
            <i class="bi bi-bag"></i> Commandes
        </a>
        <a href="#" class="nav-link" data-section="payments">
            <i class="bi bi-cash-stack"></i> Paiements
        </a>
        <a href="#" class="nav-link" data-section="admins">
            <i class="bi bi-shield-check"></i> Administrateurs
        </a>
        <a href="#" class="nav-link" data-section="analytics">
            <i class="bi bi-graph-up"></i> Analytics
        </a>
        <a href="#" class="nav-link" data-section="reports">
            <i class="bi bi-file-text"></i> Rapports
        </a>
        <a href="#" class="nav-link" data-section="settings">
            <i class="bi bi-gear"></i> Paramètres
        </a>
        <div class="logout" id="logoutBtn">
            <i class="bi bi-box-arrow-right"></i> Déconnexion
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <div class="dashboard-header">
            <h2 id="dashboardTitle">Super Admin Dashboard</h2>
            <div class="profile-mini">
                <img id="miniAvatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=admin" alt="Avatar">
                <div class="user-info">
                    <span class="name" id="miniName">Super Admin</span>
                    <span class="role" id="userRole">Administrateur Principal</span>
                </div>
            </div>
        </div>

        <!-- Vue d'ensemble Section -->
        <section class="dashboard-section" id="overviewSection">
            <h4><i class="bi bi-speedometer2"></i> Vue d'ensemble</h4>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <div class="quick-action-btn" onclick="showSection('users')">
                    <div class="icon"><i class="bi bi-person-plus"></i></div>
                    <div class="label">Ajouter un admin</div>
                </div>
                <div class="quick-action-btn" onclick="showSection('cards')">
                    <div class="icon"><i class="bi bi-slash-circle"></i></div>
                    <div class="label">Gérer les cartes</div>
                </div>
                <div class="quick-action-btn" onclick="generateReport('daily')">
                    <div class="icon"><i class="bi bi-file-earmark-text"></i></div>
                    <div class="label">Rapport quotidien</div>
                </div>
                <div class="quick-action-btn" onclick="showSection('analytics')">
                    <div class="icon"><i class="bi bi-graph-up-arrow"></i></div>
                    <div class="label">Voir analytics</div>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="stats-cards">
                <div class="stats-card">
                    <div class="icon"><i class="bi bi-people"></i></div>
                    <div class="stat-label">Utilisateurs totaux</div>
                    <div class="stat-value" id="statsTotalUsers">0</div>
                    <div class="stat-subtext">+12% ce mois-ci</div>
                </div>
                <div class="stats-card warning">
                    <div class="icon"><i class="bi bi-building"></i></div>
                    <div class="stat-label">Entreprises</div>
                    <div class="stat-value" id="statsEnterprises">0</div>
                    <div class="stat-subtext">+5 nouvelles entreprises</div>
                </div>
                <div class="stats-card success">
                    <div class="icon"><i class="bi bi-credit-card"></i></div>
                    <div class="stat-label">Cartes actives</div>
                    <div class="stat-value" id="statsActiveCards">0</div>
                    <div class="stat-subtext">85% d'activation</div>
                </div>
                <div class="stats-card danger">
                    <div class="icon"><i class="bi bi-cash-stack"></i></div>
                    <div class="stat-label">Revenus mensuels</div>
                    <div class="stat-value" id="statsRevenue">0 GNF</div>
                    <div class="stat-subtext">+18% vs mois dernier</div>
                </div>
            </div>

            <!-- Activités récentes -->
            <div class="mt-4">
                <h5 class="text-primary mb-3"><i class="bi bi-clock-history me-2"></i>Activités récentes</h5>
                <div class="timeline" id="recentActivities">
                    <!-- Activités chargées dynamiquement -->
                </div>
            </div>
        </section>

        <!-- Utilisateurs Section -->
        <section class="dashboard-section d-none" id="usersSection">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4><i class="bi bi-people"></i> Gestion des utilisateurs</h4>
                <div class="d-flex gap-2">
                    <div class="dropdown export-dropdown">
                        <button class="btn btn-admin-outline dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="bi bi-download me-2"></i> Exporter
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="exportData('users', 'csv')">
                                    <i class="bi bi-filetype-csv me-2"></i> CSV
                                </a></li>
                            <li><a class="dropdown-item" href="#" onclick="exportData('users', 'excel')">
                                    <i class="bi bi-filetype-xlsx me-2"></i> Excel
                                </a></li>
                            <li><a class="dropdown-item" href="#" onclick="exportData('users', 'json')">
                                    <i class="bi bi-filetype-json me-2"></i> JSON
                                </a></li>
                        </ul>
                    </div>
                    <button class="btn btn-admin" data-bs-toggle="modal" data-bs-target="#addUserModal">
                        <i class="bi bi-person-plus me-2"></i> Ajouter un utilisateur
                    </button>
                </div>
            </div>

            <div class="filter-buttons">
                <button class="filter-btn active" onclick="filterUsers('all')">Tous</button>
                <button class="filter-btn" onclick="filterUsers('individual')">Individuels</button>
                <button class="filter-btn" onclick="filterUsers('enterprise')">Entreprises</button>
                <button class="filter-btn" onclick="filterUsers('active')">Actifs</button>
                <button class="filter-btn" onclick="filterUsers('inactive')">Inactifs</button>
            </div>

            <div class="table-responsive">
                <table class="table admin-table" id="usersTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nom</th>
                            <th>Email</th>
                            <th>Téléphone</th>
                            <th>Type</th>
                            <th>Statut</th>
                            <th>Date inscription</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <!-- Les utilisateurs seront injectés ici -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Entreprises Section -->
        <section class="dashboard-section d-none" id="enterprisesSection">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4><i class="bi bi-building"></i> Gestion des entreprises</h4>
                <div class="d-flex gap-2">
                    <div class="dropdown export-dropdown">
                        <button class="btn btn-admin-outline dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="bi bi-download me-2"></i> Exporter
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="exportData('enterprises', 'csv')">
                                    <i class="bi bi-filetype-csv me-2"></i> CSV
                                </a></li>
                            <li><a class="dropdown-item" href="#" onclick="exportData('enterprises', 'excel')">
                                    <i class="bi bi-filetype-xlsx me-2"></i> Excel
                                </a></li>
                        </ul>
                    </div>
                    <button class="btn btn-admin" onclick="viewEnterpriseStats()">
                        <i class="bi bi-graph-up me-2"></i> Statistiques
                    </button>
                </div>
            </div>

            <div class="cards-grid" id="enterprisesGrid">
                <!-- Cartes entreprises injectées ici -->
            </div>
        </section>

        <!-- Cartes Section -->
        <section class="dashboard-section d-none" id="cardsSection">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4><i class="bi bi-credit-card"></i> Gestion des cartes</h4>
                <div class="d-flex gap-2">
                    <div class="dropdown export-dropdown">
                        <button class="btn btn-admin-outline dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="bi bi-download me-2"></i> Exporter
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="exportData('cards', 'csv')">
                                    <i class="bi bi-filetype-csv me-2"></i> CSV
                                </a></li>
                            <li><a class="dropdown-item" href="#" onclick="exportData('cards', 'excel')">
                                    <i class="bi bi-filetype-xlsx me-2"></i> Excel
                                </a></li>
                        </ul>
                    </div>
                    <button class="btn btn-admin" data-bs-toggle="modal" data-bs-target="#bulkCardActionModal">
                        <i class="bi bi-gear me-2"></i> Actions en masse
                    </button>
                </div>
            </div>

            <div class="filter-buttons">
                <button class="filter-btn active" onclick="filterCards('all')">Toutes</button>
                <button class="filter-btn" onclick="filterCards('active')">Actives</button>
                <button class="filter-btn" onclick="filterCards('inactive')">Inactives</button>
                <button class="filter-btn" onclick="filterCards('blocked')">Bloquées</button>
                <button class="filter-btn" onclick="filterCards('enterprise')">Entreprises</button>
                <button class="filter-btn" onclick="filterCards('individual')">Individuelles</button>
            </div>

            <div class="table-responsive">
                <table class="table admin-table" id="cardsTable">
                    <thead>
                        <tr>
                            <th>ID Carte</th>
                            <th>Propriétaire</th>
                            <th>Type</th>
                            <th>Statut</th>
                            <th>Scans</th>
                            <th>Liens actifs</th>
                            <th>Création</th>
                            <th>Dernier scan</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="cardsTableBody">
                        <!-- Les cartes seront injectées ici -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Commandes Section -->
        <section class="dashboard-section d-none" id="ordersSection">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4><i class="bi bi-bag"></i> Gestion des commandes</h4>
                <div class="d-flex gap-2">
                    <button class="btn btn-admin-outline" onclick="refreshOrders()">
                        <i class="bi bi-arrow-clockwise me-2"></i> Actualiser
                    </button>
                    <button class="btn btn-admin" data-bs-toggle="modal" data-bs-target="#updateOrderModal">
                        <i class="bi bi-pencil me-2"></i> Mettre à jour statut
                    </button>
                </div>
            </div>

            <div class="filter-buttons">
                <button class="filter-btn active" onclick="filterOrders('all')">Toutes</button>
                <button class="filter-btn" onclick="filterOrders('pending')">En attente</button>
                <button class="filter-btn" onclick="filterOrders('processing')">En production</button>
                <button class="filter-btn" onclick="filterOrders('shipping')">Livraison</button>
                <button class="filter-btn" onclick="filterOrders('delivered')">Livrées</button>
                <button class="filter-btn" onclick="filterOrders('cancelled')">Annulées</button>
            </div>

            <div class="table-responsive">
                <table class="table admin-table" id="ordersTable">
                    <thead>
                        <tr>
                            <th>N° Commande</th>
                            <th>Client</th>
                            <th>Produit</th>
                            <th>Montant</th>
                            <th>Statut</th>
                            <th>Date commande</th>
                            <th>Date livraison</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="ordersTableBody">
                        <!-- Les commandes seront injectées ici -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Paiements Section -->
        <section class="dashboard-section d-none" id="paymentsSection">
            <h4><i class="bi bi-cash-stack"></i> Suivi des paiements</h4>

            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="stats-card">
                        <div class="icon"><i class="bi bi-currency-exchange"></i></div>
                        <div class="stat-label">Revenus totaux</div>
                        <div class="stat-value" id="totalRevenue">0 GNF</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card success">
                        <div class="icon"><i class="bi bi-check-circle"></i></div>
                        <div class="stat-label">Paiements réussis</div>
                        <div class="stat-value" id="successfulPayments">0</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card warning">
                        <div class="icon"><i class="bi bi-clock"></i></div>
                        <div class="stat-label">En attente</div>
                        <div class="stat-value" id="pendingPayments">0</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card danger">
                        <div class="icon"><i class="bi bi-x-circle"></i></div>
                        <div class="stat-label">Échoués</div>
                        <div class="stat-value" id="failedPayments">0</div>
                    </div>
                </div>
            </div>

            <div class="table-responsive">
                <table class="table admin-table" id="paymentsTable">
                    <thead>
                        <tr>
                            <th>ID Transaction</th>
                            <th>Client</th>
                            <th>Montant</th>
                            <th>Méthode</th>
                            <th>Statut</th>
                            <th>Date</th>
                            <th>Commande associée</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="paymentsTableBody">
                        <!-- Les paiements seront injectés ici -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Administrateurs Section -->
        <section class="dashboard-section d-none" id="adminsSection">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4><i class="bi bi-shield-check"></i> Gestion des administrateurs</h4>
                <button class="btn btn-admin" data-bs-toggle="modal" data-bs-target="#addAdminModal">
                    <i class="bi bi-person-plus me-2"></i> Ajouter un administrateur
                </button>
            </div>

            <div class="admin-alert">
                <i class="bi bi-info-circle me-2"></i>
                Seul le Super Admin peut créer ou supprimer d'autres administrateurs.
            </div>

            <div class="table-responsive">
                <table class="table admin-table">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Email</th>
                            <th>Rôle</th>
                            <th>Permissions</th>
                            <th>Dernière connexion</th>
                            <th>Statut</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="adminsTableBody">
                        <!-- Les administrateurs seront injectés ici -->
                    </tbody>
                </table>
            </div>

            <div class="mt-4">
                <h5 class="text-primary mb-3"><i class="bi bi-shield-lock me-2"></i>Rôles et permissions</h5>
                <div class="row">
                    <div class="col-md-4">
                        <div class="card-item">
                            <div class="card-title">Super Admin</div>
                            <div class="card-subtitle">Accès complet</div>
                            <ul class="mt-3" style="color: var(--text-secondary);">
                                <li>Créer/supprimer des admins</li>
                                <li>Gérer tous les utilisateurs</li>
                                <li>Accès à toutes les données</li>
                                <li>Configuration système</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card-item">
                            <div class="card-title">Admin Support</div>
                            <div class="card-subtitle">Support et gestion</div>
                            <ul class="mt-3" style="color: var(--text-secondary);">
                                <li>Gérer les commandes</li>
                                <li>Bloquer/débloquer cartes</li>
                                <li>Voir les données utilisateurs</li>
                                <li>Pas de facturation</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card-item">
                            <div class="card-title">Admin Analytics</div>
                            <div class="card-subtitle">Lecture seule</div>
                            <ul class="mt-3" style="color: var(--text-secondary);">
                                <li>Voir les analytics</li>
                                <li>Exporter des rapports</li>
                                <li>Lecture des données</li>
                                <li>Pas de modifications</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Analytics Section -->
        <section class="dashboard-section d-none" id="analyticsSection">
            <h4><i class="bi bi-graph-up"></i> Analytics & Statistiques</h4>

            <div class="row mb-4">
                <div class="col-md-8">
                    <div class="card bg-dark border border-secondary">
                        <div class="card-body">
                            <h5 class="card-title text-primary">Croissance des utilisateurs (30 jours)</h5>
                            <div class="chart-container">
                                <canvas id="usersGrowthChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card bg-dark border border-secondary">
                        <div class="card-body">
                            <h5 class="card-title text-primary">Répartition des cartes</h5>
                            <div class="chart-container">
                                <canvas id="cardsDistributionChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card bg-dark border border-secondary">
                        <div class="card-body">
                            <h5 class="card-title text-primary">Revenus mensuels</h5>
                            <div class="chart-container">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card bg-dark border border-secondary">
                        <div class="card-body">
                            <h5 class="card-title text-primary">Top 5 entreprises</h5>
                            <div id="topEnterprises">
                                <!-- Top entreprises injecté ici -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-4">
                <button class="btn btn-admin" onclick="generateAnalyticsReport()">
                    <i class="bi bi-file-earmark-pdf me-2"></i> Générer rapport analytics
                </button>
            </div>
        </section>

        <!-- Rapports Section -->
        <section class="dashboard-section d-none" id="reportsSection">
            <h4><i class="bi bi-file-text"></i> Rapports & Exports</h4>

            <div class="row">
                <div class="col-md-4">
                    <div class="card-item" onclick="generateReport('daily')">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Rapport quotidien</div>
                                <div class="card-subtitle">Activités du jour</div>
                            </div>
                            <i class="bi bi-file-text text-primary" style="font-size: 1.5rem;"></i>
                        </div>
                        <div class="card-stats">
                            <div class="card-stat">
                                <div class="card-stat-value" id="dailyUsers">0</div>
                                <div class="card-stat-label">Nouveaux utilisateurs</div>
                            </div>
                            <div class="card-stat">
                                <div class="card-stat-value" id="dailyOrders">0</div>
                                <div class="card-stat-label">Nouvelles commandes</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card-item" onclick="generateReport('weekly')">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Rapport hebdomadaire</div>
                                <div class="card-subtitle">Performances de la semaine</div>
                            </div>
                            <i class="bi bi-calendar-week text-primary" style="font-size: 1.5rem;"></i>
                        </div>
                        <div class="card-stats">
                            <div class="card-stat">
                                <div class="card-stat-value" id="weeklyRevenue">0 GNF</div>
                                <div class="card-stat-label">Revenus</div>
                            </div>
                            <div class="card-stat">
                                <div class="card-stat-value" id="weeklyGrowth">0%</div>
                                <div class="card-stat-label">Croissance</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card-item" onclick="generateReport('monthly')">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Rapport mensuel</div>
                                <div class="card-subtitle">Analyse complète</div>
                            </div>
                            <i class="bi bi-graph-up text-primary" style="font-size: 1.5rem;"></i>
                        </div>
                        <div class="card-stats">
                            <div class="card-stat">
                                <div class="card-stat-value" id="monthlyActive">0</div>
                                <div class="card-stat-label">Utilisateurs actifs</div>
                            </div>
                            <div class="card-stat">
                                <div class="card-stat-value" id="monthlyCards">0</div>
                                <div class="card-stat-label">Cartes créées</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-4">
                <h5 class="text-primary mb-3">Exports de données</h5>
                <div class="row g-3">
                    <div class="col-md-3">
                        <button class="btn btn-admin-outline w-100" onclick="exportAllData('csv')">
                            <i class="bi bi-filetype-csv me-2"></i> Toutes données (CSV)
                        </button>
                    </div>
                    <div class="col-md-3">
                        <button class="btn btn-admin-outline w-100" onclick="exportAllData('excel')">
                            <i class="bi bi-filetype-xlsx me-2"></i> Toutes données (Excel)
                        </button>
                    </div>
                    <div class="col-md-3">
                        <button class="btn btn-admin-outline w-100" onclick="exportAllData('json')">
                            <i class="bi bi-filetype-json me-2"></i> Backup complet (JSON)
                        </button>
                    </div>
                    <div class="col-md-3">
                        <button class="btn btn-admin-outline w-100" onclick="generateAuditReport()">
                            <i class="bi bi-shield-check me-2"></i> Rapport d'audit
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Paramètres Section -->
        <section class="dashboard-section d-none" id="settingsSection">
            <h4><i class="bi bi-gear"></i> Paramètres système</h4>

            <div class="row">
                <div class="col-md-8">
                    <form id="systemSettingsForm">
                        <h5 class="text-primary mb-3"><i class="bi bi-bell me-2"></i>Notifications système</h5>
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="sysNotifNewUser" checked>
                                    <label class="form-check-label" for="sysNotifNewUser">
                                        Nouveaux utilisateurs
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="sysNotifNewOrder" checked>
                                    <label class="form-check-label" for="sysNotifNewOrder">
                                        Nouvelles commandes
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="sysNotifPayment" checked>
                                    <label class="form-check-label" for="sysNotifPayment">
                                        Paiements reçus
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="sysNotifCardBlocked" checked>
                                    <label class="form-check-label" for="sysNotifCardBlocked">
                                        Cartes bloquées
                                    </label>
                                </div>
                            </div>
                        </div>

                        <h5 class="text-primary mb-3"><i class="bi bi-shield me-2"></i>Sécurité</h5>
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <label class="form-label">Session timeout (minutes)</label>
                                <input type="number" class="form-control admin-form-control" id="sysSessionTimeout"
                                    min="15" max="480" value="30">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Tentatives de connexion max</label>
                                <input type="number" class="form-control admin-form-control" id="sysMaxLoginAttempts"
                                    min="3" max="10" value="5">
                            </div>
                            <div class="col-12">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="sysTwoFactorAuth">
                                    <label class="form-check-label" for="sysTwoFactorAuth">
                                        Authentification à deux facteurs obligatoire pour les admins
                                    </label>
                                </div>
                            </div>
                        </div>

                        <h5 class="text-primary mb-3"><i class="bi bi-credit-card me-2"></i>Paiements</h5>
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <label class="form-label">Devise par défaut</label>
                                <select class="form-select admin-form-control" id="sysDefaultCurrency">
                                    <option value="GNF" selected>Franc Guinéen (GNF)</option>
                                    <option value="USD">Dollar US (USD)</option>
                                    <option value="EUR">Euro (EUR)</option>
                                    <option value="XOF">Franc CFA (XOF)</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Taxe de service (%)</label>
                                <input type="number" class="form-control admin-form-control" id="sysServiceTax" min="0"
                                    max="20" step="0.5" value="0">
                            </div>
                        </div>

                        <h5 class="text-primary mb-3"><i class="bi bi-envelope me-2"></i>Email système</h5>
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <label class="form-label">Email expéditeur</label>
                                <input type="email" class="form-control admin-form-control" id="sysSenderEmail"
                                    value="noreply@bankai.com">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Nom expéditeur</label>
                                <input type="text" class="form-control admin-form-control" id="sysSenderName"
                                    value="Bankaï Support">
                            </div>
                        </div>

                        <div class="mt-4">
                            <button type="submit" class="btn btn-admin">
                                <i class="bi bi-save me-2"></i> Enregistrer les paramètres
                            </button>
                        </div>
                    </form>
                </div>
                <div class="col-md-4">
                    <div class="card bg-dark border border-secondary">
                        <div class="card-body">
                            <h5 class="card-title text-primary"><i class="bi bi-database me-2"></i>Base de données</h5>
                            <div class="card-stats">
                                <div class="card-stat">
                                    <div class="card-stat-value" id="dbSize">0 MB</div>
                                    <div class="card-stat-label">Taille totale</div>
                                </div>
                                <div class="card-stat">
                                    <div class="card-stat-value" id="dbBackupCount">0</div>
                                    <div class="card-stat-label">Backups</div>
                                </div>
                            </div>
                            <div class="d-grid gap-2 mt-3">
                                <button class="btn btn-admin-outline" onclick="backupDatabase()">
                                    <i class="bi bi-database me-2"></i> Sauvegarder la base
                                </button>
                                <button class="btn btn-admin-outline" onclick="optimizeDatabase()">
                                    <i class="bi bi-speedometer2 me-2"></i> Optimiser la base
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card bg-dark border border-warning mt-3">
                        <div class="card-body">
                            <h5 class="card-title text-warning"><i class="bi bi-tools me-2"></i>Maintenance</h5>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="maintenanceMode">
                                <label class="form-check-label" for="maintenanceMode">
                                    Mode maintenance
                                </label>
                            </div>
                            <div class="d-grid gap-2">
                                <button class="btn btn-warning" onclick="clearCache()">
                                    <i class="bi bi-trash me-2"></i> Vider le cache
                                </button>
                                <button class="btn btn-admin-outline" onclick="runSystemCheck()">
                                    <i class="bi bi-check-circle me-2"></i> Vérification système
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card bg-dark border border-danger mt-3">
                        <div class="card-body">
                            <h5 class="card-title text-danger"><i class="bi bi-exclamation-triangle me-2"></i>Zone
                                dangereuse</h5>
                            <p class="text-secondary small">Ces actions sont irréversibles</p>
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-danger" onclick="resetAllSettings()">
                                    <i class="bi bi-arrow-clockwise me-2"></i> Réinitialiser paramètres
                                </button>
                                <button class="btn btn-outline-danger" onclick="purgeOldData()">
                                    <i class="bi bi-trash me-2"></i> Purger données anciennes
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modals -->

    <!-- Add User Modal -->
    <div class="modal fade admin-modal" id="addUserModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-person-plus me-2"></i>Ajouter un utilisateur</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addUserForm">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Type d'utilisateur *</label>
                                <select class="form-select admin-form-control" id="userType" required>
                                    <option value="">Sélectionner...</option>
                                    <option value="individual">Client individuel</option>
                                    <option value="enterprise">Entreprise</option>
                                    <option value="subadmin">Sous-administrateur</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Statut *</label>
                                <select class="form-select admin-form-control" id="userStatus" required>
                                    <option value="active">Actif</option>
                                    <option value="inactive">Inactif</option>
                                    <option value="pending">En attente</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Prénom *</label>
                                <input type="text" class="form-control admin-form-control" id="userFirstName" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Nom *</label>
                                <input type="text" class="form-control admin-form-control" id="userLastName" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Email *</label>
                                <input type="email" class="form-control admin-form-control" id="userEmail" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Téléphone</label>
                                <input type="tel" class="form-control admin-form-control" id="userPhone">
                            </div>
                            <div class="col-12" id="companyFields" style="display: none;">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Nom de l'entreprise</label>
                                        <input type="text" class="form-control admin-form-control" id="userCompany">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">SIRET/NIF</label>
                                        <input type="text" class="form-control admin-form-control" id="userTaxId">
                                    </div>
                                </div>
                            </div>
                            <div class="col-12" id="adminFields" style="display: none;">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Rôle admin</label>
                                        <select class="form-select admin-form-control" id="adminRole">
                                            <option value="support">Admin Support</option>
                                            <option value="analytics">Admin Analytics</option>
                                            <option value="manager">Admin Manager</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Permissions</label>
                                        <select class="form-select admin-form-control" id="adminPermissions" multiple>
                                            <option value="users">Gérer utilisateurs</option>
                                            <option value="orders">Gérer commandes</option>
                                            <option value="cards">Gérer cartes</option>
                                            <option value="analytics">Voir analytics</option>
                                            <option value="exports">Exporter données</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Mot de passe *</label>
                                <input type="password" class="form-control admin-form-control" id="userPassword"
                                    required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Confirmer mot de passe *</label>
                                <input type="password" class="form-control admin-form-control" id="userPasswordConfirm"
                                    required>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-admin-outline" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-admin" onclick="createUser()">Créer l'utilisateur</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Admin Modal -->
    <div class="modal fade admin-modal" id="addAdminModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-shield-plus me-2"></i>Ajouter un administrateur</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addAdminForm">
                        <div class="mb-3">
                            <label class="form-label">Email *</label>
                            <input type="email" class="form-control admin-form-control" id="adminEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Nom complet *</label>
                            <input type="text" class="form-control admin-form-control" id="adminName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Rôle *</label>
                            <select class="form-select admin-form-control" id="adminType" required>
                                <option value="superadmin">Super Admin (Accès complet)</option>
                                <option value="support">Admin Support (Gestion)</option>
                                <option value="analytics">Admin Analytics (Lecture seule)</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Mot de passe temporaire *</label>
                            <input type="password" class="form-control admin-form-control" id="adminTempPassword"
                                required>
                            <div class="form-text">L'admin devra changer ce mot de passe à sa première connexion</div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-admin-outline" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-admin" onclick="createAdmin()">Créer l'admin</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Update Order Modal -->
    <div class="modal fade admin-modal" id="updateOrderModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-pencil me-2"></i>Mettre à jour une commande</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">N° Commande *</label>
                        <input type="text" class="form-control admin-form-control" id="updateOrderId"
                            placeholder="Ex: CMD-2024-001" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Nouveau statut *</label>
                        <select class="form-select admin-form-control" id="updateOrderStatus" required>
                            <option value="pending">En attente</option>
                            <option value="processing">En production</option>
                            <option value="shipping">Livraison en cours</option>
                            <option value="delivered">Livrée</option>
                            <option value="cancelled">Annulée</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Notes (optionnel)</label>
                        <textarea class="form-control admin-form-control" id="updateOrderNotes" rows="3"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-admin-outline" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-admin" onclick="updateOrderStatus()">Mettre à jour</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bulk Card Action Modal -->
    <div class="modal fade admin-modal" id="bulkCardActionModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-gear me-2"></i>Actions en masse sur les cartes</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Action à effectuer *</label>
                        <select class="form-select admin-form-control" id="bulkCardAction" required>
                            <option value="">Sélectionner une action...</option>
                            <option value="block">Bloquer les cartes</option>
                            <option value="unblock">Débloquer les cartes</option>
                            <option value="activate">Activer les cartes</option>
                            <option value="deactivate">Désactiver les cartes</option>
                            <option value="reset">Réinitialiser les scans</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Sélectionner les cartes *</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="bulkSelectAll">
                            <label class="form-check-label" for="bulkSelectAll">
                                Toutes les cartes
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="bulkSelectEnterprise">
                            <label class="form-check-label" for="bulkSelectEnterprise">
                                Cartes entreprises seulement
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="bulkSelectIndividual">
                            <label class="form-check-label" for="bulkSelectIndividual">
                                Cartes individuelles seulement
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="bulkSelectInactive">
                            <label class="form-check-label" for="bulkSelectInactive">
                                Cartes inactives seulement
                            </label>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">ID Cartes spécifiques (optionnel)</label>
                        <textarea class="form-control admin-form-control" id="bulkCardIds" rows="3"
                            placeholder="Entrez les ID cartes, un par ligne&#10;Ex: BKA-001234&#10;BKA-001235"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-admin-outline" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-admin" onclick="executeBulkCardAction()">Exécuter
                        l'action</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="dashboard-admin.js"></script>
</body>

</html>